# crypto-rate-service

Сервис для получения курсов криптовалют, хранения в БД и выдачи через REST API + Telegram Bot.

## Описание проекта

Цель проекта — разработать систему, которая:
- Периодически (каждые 5 минут) получает курсы основных криптовалют (BTC, ETH) с внешнего API.
- Сохраняет данные в базе данных для анализа.
- Предоставляет REST API для получения актуальных данных, а также исторических метрик:
    - Минимальная и максимальная цена за день
    - Изменение в процентах за последний час
- Реализует Telegram-бота с командами:
    - `/start` — приветственное сообщение
    - `/rates` — текущие курсы
    - `/rates {crypto}` — курс конкретной валюты
    - `/startauto {minutes}` — автоотправка данных каждые N минут
    - `/stopauto` — остановка автоотправки

---

## Предполагаемый стек технологий

- **Язык программирования**: Go (Golang) `1.21+`
- **REST API**: labstack [Echo](https://github.com/labstack/echo)
- **Конфигурация**: [cleanenv](https://github.com/ilyakaznacheev/cleanenv) + YAML
- **Логирование**: встроенный `slog` (Go 1.21+)
- **База данных**: PostgreSQL
- **Работа с БД**: [pgx](https://github.com/jackc/pgx)
- **Миграции БД**: [golang-migrate](https://github.com/golang-migrate/migrate)
- **Telegram Bot API**: [telebot](https://github.com/tucnak/telebot)
- **Фоновая задача**: goroutines + ticker
- **Документация API**: OpenAPI (Swagger)
- **Контейнеризация**: Makefile + Docker + Docker Compose

---

## Roadmap (Этапы разработки)

- [ ] **Шаг 1:** Создать структуру проекта
- [ ] **Шаг 2:** Реализовать загрузку конфигурации (YAML через cleanenv)
- [ ] **Шаг 3:** Настроить логирование через slog
- [ ] **Шаг 4:** Настроить подключение к PostgreSQL (pgx) + миграции
- [ ] **Шаг 5:** Создать доменные сущности (Rate) и репозиторий
- [ ] **Шаг 6:** Написать сервис для получения курсов с внешнего API
- [ ] **Шаг 7:** Запустить фоновый процесс обновления курсов (каждые 5 мин)
- [ ] **Шаг 8:** Реализовать REST API (на Echo):
    - `GET /rates` — список курсов
    - `GET /rates/{cryptocurrency}` — курс конкретной валюты
- [ ] **Шаг 9:** Реализовать Telegram-бота:
    - `/start`, `/rates`, `/rates {crypto}`
    - `/startauto {minutes}`, `/stopauto`
- [ ] **Шаг 10:** Добавить OpenAPI (Swagger)
- [ ] **Шаг 11:** Контейнеризация (Docker + docker-compose)
- [ ] **Шаг 12:** Написать тесты (unit)
- [ ] **Шаг 13:** Настроить CI/CD (GitHub Actions)